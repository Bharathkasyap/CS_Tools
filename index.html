<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cyber Analyst Mission Control</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="CS_tools_Style.css">

  <!-- XLSX Helper Script -->
  <script type="text/javascript">
    var gk_isXlsx = false;
    var gk_xlsxFileLookup = {};
    var gk_fileData = {};
    function filledCell(cell) {
      return cell !== '' && cell != null;
    }
    function loadFileData(filename) {
      if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
        try {
          var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
          var firstSheetName = workbook.SheetNames[0];
          var worksheet = workbook.Sheets[firstSheetName];
          var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
          var filteredData = jsonData.filter(row => row.some(filledCell));
          var headerRowIndex = filteredData.findIndex((row, index) =>
            row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
          );
          if (headerRowIndex === -1 || headerRowIndex > 25) headerRowIndex = 0;
          var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex));
          csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
          return csv;
        } catch (e) {
          console.error(e);
          return "";
        }
      }
      return gk_fileData[filename] || "";
    }
  </script>

  <!-- Main JS -->
  <script src="CS_tools_Script.js" defer></script>
</head>
<body class="min-h-screen flex flex-col">

  <!-- Header -->
  <header class="p-4 border-b flex justify-between items-center">
    <h1 class="text-lg font-semibold">Cyber Analyst Mission Control</h1>
    <button id="themeToggle" class="btn">Theme</button>
  </header>

  <!-- Main Layout -->
  <main class="flex-1 grid grid-cols-[250px_1fr_250px] lg:grid-cols-1 gap-4 p-4">

    <!-- Sidebar -->
    <aside id="leftNav" class="space-y-4 p-3 border rounded shadow">
      <input id="globalSearch" class="w-full p-2 rounded border" type="text" placeholder="Filter tools...">

      <section>
        <button data-collapse="#grp-network" class="font-semibold w-full text-left">Networking▾</button>
        <div id="grp-network" class="mt-2 space-y-1">
          <button class="nav-item" data-tool="subnetting">Subnetting Calculator</button>
          <button class="nav-item" data-tool="cidr">CIDR Calculator</button>
          <button class="nav-item" data-tool="wildcard">Wildcard Mask</button>
          <button class="nav-item" data-tool="hexdec">Hex ↔ Dec</button>
          <button class="nav-item" data-tool="timestamp">Timestamp Converter</button>
        </div>
      </section>

      <section>
        <button data-collapse="#grp-crypto" class="font-semibold w-full text-left">Crypto & Encoding▾</button>
        <div id="grp-crypto" class="mt-2 space-y-1">
          <button class="nav-item" data-tool="base64">Base64 Encode/Decode</button>
        </div>
      </section>

      <section>
        <button data-collapse="#grp-risk" class="font-semibold w-full text-left">Risk & Governance▾</button>
        <div id="grp-risk" class="mt-2 space-y-1">
          <button class="nav-item" data-tool="ale">ALE / SLE / ARO Calculator</button>
          <button class="nav-item" data-tool="cvss">CVSS v3.1 Vector Helper</button>
        </div>
      </section>

      <section>
        <button data-collapse="#grp-siem" class="font-semibold w-full text-left">SIEM & Detection▾</button>
        <div id="grp-siem" class="mt-2 space-y-1">
          <button class="nav-item" data-tool="kqlCheat">KQL Cheat Sheet</button>
          <button class="nav-item" data-tool="splCheat">SPL Cheat Sheet</button>
          <button class="nav-item" data-tool="regex">Regex Tester</button>
        </div>
      </section>

      <section>
        <button data-collapse="#grp-runbooks" class="font-semibold w-full text-left">Runbooks▾</button>
        <div id="grp-runbooks" class="mt-2 space-y-1">
          <button class="nav-item" data-tool="runbook" data-runbook="ransomware">Ransomware Suspected</button>
          <button class="nav-item" data-tool="runbook" data-runbook="unauth">Unauthorized Access</button>
          <button class="nav-item" data-tool="runbook" data-runbook="phishing">Phishing Wave</button>
          <button class="nav-item" data-tool="runbook" data-runbook="exfil">Active Data Exfiltration</button>
          <button class="nav-item" data-tool="runbook" data-runbook="lateral">Lateral Movement</button>
          <button class="nav-item" data-tool="runbook" data-runbook="webshell">Web Shell Suspected</button>
          <button class="nav-item" data-tool="runbook" data-runbook="ddos">DDoS / Edge Exploitation</button>
          <button class="nav-item" data-tool="runbook" data-runbook="insider">Insider Data Mishandling</button>
          <button class="nav-item" data-tool="runbook" data-runbook="lostdevice">Lost/Stolen Device</button>
        </div>
      </section>

      <section>
        <button data-collapse="#grp-links" class="font-semibold w-full text-left">Gold Links▾</button>
        <div id="grp-links" class="mt-2 space-y-1">
          <button class="nav-item" data-tool="links">Curated Docs & References</button>
        </div>
      </section>
    </aside>

    <!-- Main Content -->
    <section class="space-y-4">
      <div id="view-dashboard" class="view">
        <h2 class="font-semibold text-lg">Dashboard</h2>
        <p class="text-slate-500">Quick access to favorites and recent tools.</p>
        <div class="grid grid-cols-2 gap-2 mt-4">
          <button class="card-link" data-tool="base64">Open Base64</button>
          <button class="card-link" data-tool="cidr">Open CIDR</button>
          <button class="card-link" data-tool="subnetting">Open Subnetting</button>
          <button class="card-link" data-tool="wildcard">Open Wildcard</button>
          <button class="card-link" data-tool="kqlCheat">Open KQL</button>
        </div>
      </div>
      <!-- Tool views (subnetting, base64, etc.) stay as you already wrote -->
    </section>

    <!-- Right Sidebar -->
    <aside class="space-y-4 p-3 border rounded shadow">
      <section>
        <h2 class="font-semibold text-lg">Related Links</h2>
        <ul id="relatedLinks" class="mt-2 list-disc ml-5 space-y-1"></ul>
      </section>

      <section>
        <h2 class="font-semibold text-lg">Personal Quick Links</h2>
        <div class="mt-2 flex gap-2">
          <input id="ql-url" class="flex-1 p-2 rounded border" type="text" placeholder="Add URL">
          <button id="ql-add" class="btn">Add</button>
        </div>
        <ul id="ql-list" class="mt-2 list-disc ml-5 space-y-1"></ul>
      </section>

      <section>
        <h2 class="font-semibold text-lg">Notes</h2>
        <textarea id="notes" class="w-full p-2 mt-2 border rounded" rows="10" placeholder="Auto saved locally"></textarea>
      </section>
    </aside>

  </main>
</body>
</html>
